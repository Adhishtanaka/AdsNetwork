@baseUrl = http://localhost:8080
@contentType = application/json
@phone = +94771234567
@adId = 1
@authToken = randomstring123456
@commentId = 1
###
GET {{baseUrl}}/health

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:26 +0530
content-encoding: gzip
content-length: 107
###
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "username": "johndoe",
  "email": "user{{$timestamp}}@example.com",
  "password": "securepassword",
  "location": {
    "name": "Colombo",
    "lat": 6.9271,
    "lng": 79.8612,
    "geohash": "tc2m4z0f0"
  },
  "phone": "{{phone}}"
}

HTTP/1.1 201  - Created
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:32 +0530
content-encoding: gzip
content-length: 138
###
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "user@example.com",
  "password": "userpassword",
  "location": {
    "name": "Kandy",
    "lat": 7.2906,
    "lng": 80.6337,
    "geohash": "tc31k23wn"
  }
}

> {%
  const body = JSON.parse(response.body);
  if (body && body.token) {
    client.global.set("authToken", body.token);
  }
%}
###
GET {{baseUrl}}/auth/profile
Authorization: Bearer {{authToken}}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:35 +0530
content-encoding: gzip
content-length: 64
###
POST {{baseUrl}}/advertisements
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "title": "iPhone 13 Pro Max",
  "description": "Excellent condition, lightly used, box and charger included.",
  "price": "999.99",
  "location": {
    "name": "Colombo",
    "lat": 6.9271,
    "lng": 79.8612,
    "geohash": "tc2m4z0f0"
  },
  "category": "Electronics",
  "userEmail": "user@example.com",
  "photoUrls": [
    "https://example.com/photo1.jpg",
    "https://example.com/photo2.jpg"
  ]
}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:35 +0530
content-encoding: gzip
content-length: 64
###
GET {{baseUrl}}/advertisements

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:39 +0530
content-encoding: gzip
content-length: 555
###
GET {{baseUrl}}/advertisements/{{adId}}

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:40 +0530
content-encoding: gzip
content-length: 557
###
GET {{baseUrl}}/advertisements/my-ads
Authorization: Bearer {{authToken}}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:41 +0530
content-encoding: gzip
content-length: 64
###
PUT {{baseUrl}}/advertisements/{{adId}}
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "title": "Updated iPhone 13 Pro Max",
  "description": "Updated description with more details.",
  "price": "899.99",
  "location": {
    "name": "Galle",
    "lat": 6.0535,
    "lng": 80.2200,
    "geohash": "tc2f0m3j3"
  },
  "category": "Mobile Phones",
  "photoUrls": [
    "https://example.com/new_photo1.jpg"
  ]
}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:41 +0530
content-encoding: gzip
content-length: 64
###
DELETE {{baseUrl}}/advertisements/{{adId}}
Authorization: Bearer {{authToken}}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:41 +0530
content-encoding: gzip
content-length: 64
###
POST {{baseUrl}}/comments
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "ad_id": {{adId}},
  "sentiment": "good",
  "description": "Great product! Very satisfied."
}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:42 +0530
content-encoding: gzip
content-length: 64
###
GET {{baseUrl}}/comments

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:43 +0530
content-encoding: gzip
content-length: 185
###
GET {{baseUrl}}/comments/{{commentId}}

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:45 +0530
content-encoding: gzip
content-length: 180
###
GET {{baseUrl}}/comments/ad/{{adId}}

HTTP/1.1 200  - OK
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:45 +0530
content-encoding: gzip
content-length: 192
###
DELETE {{baseUrl}}/comments/{{commentId}}
Authorization: Bearer {{authToken}}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:46 +0530
content-encoding: gzip
content-length: 64
###
OPTIONS {{baseUrl}}/advertisements
Origin: http://localhost:5173
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type, authorization

HTTP/1.1 204  - No Content
allow: POST, GET, OPTIONS
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:46 +0530
###
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "user@example.com"
}

HTTP/1.1 400  - Bad Request
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:46 +0530
content-encoding: gzip
content-length: 84
###
POST {{baseUrl}}/comments
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "ad_id": {{adId}},
  "sentiment": "amazing", 
  "description": "This should fail because sentiment is invalid."
}

HTTP/1.1 401  - Unauthorized
content-type: application/json
connection: close
server: ballerina
date: Fri, 15 Aug 2025 20:02:47 +0530
content-encoding: gzip
content-length: 64